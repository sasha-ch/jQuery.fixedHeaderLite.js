/*
 * jQuery fixedHeaderLite plugin 
 * Fix a table's header, so it is always visible while scrolling
 * Lite version. Optimized for heavy tables (20-50 cols, 100-10000 rows).
 * Support of <input> and <select> elements in <thead>
 * Use non-recursive clone element function $.clonex()
 * Developed for using in DataTables instead of http://datatables.net/extensions/fixedheader/
*/

;(function($){function disableScript(elem){elem.type=(jQuery.find.attr(elem,"type")!==null)+"/"+elem.type;return elem;}
function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1];}else{elem.removeAttribute("type");}
return elem;}
function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return;}
var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}
if(curData.data){curData.data=jQuery.extend({},curData.data);}}
function setGlobalEval(elems,refElements){var elem,i=0;for(;(elem=elems[i])!=null;i++){jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"));}}
function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(dest.nodeType!==1){return;}
nodeName=dest.nodeName.toLowerCase();if(!support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events){jQuery.removeEvent(dest,e,data.handle);}
dest.removeAttribute(jQuery.expando);}
if(nodeName==="script"&&dest.text!==src.text){disableScript(dest).text=src.text;restoreScript(dest);}else if(nodeName==="object"){if(dest.parentNode){dest.outerHTML=src.outerHTML;}
if(support.html5Clone&&(src.innerHTML&&!jQuery.trim(dest.innerHTML))){dest.innerHTML=src.innerHTML;}}else if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value){dest.value=src.value;}}else if(nodeName==="option"){dest.defaultSelected=dest.selected=src.defaultSelected;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}}
function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==jQuery.strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==jQuery.strundefined?context.querySelectorAll(tag||"*"):undefined;if(!found){for(found=[],elems=context.childNodes||context;(elem=elems[i])!=null;i++){if(!tag||jQuery.nodeName(elem,tag)){found.push(elem);}else{jQuery.merge(found,getAll(elem,tag));}}}
return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found;}
jQuery.extend({clonex:function(elem,deep,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")){clone=elem.cloneNode(deep);}else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild);}
if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0;(node=srcElements[i])!=null;++i){if(destElements[i]){fixCloneNodeIssues(node,destElements[i]);}}}
if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0;(node=srcElements[i])!=null;i++){cloneCopyEvent(node,destElements[i]);}}else{cloneCopyEvent(elem,clone);}}
destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"));}
destElements=srcElements=node=null;return clone;}});jQuery.fn.extend({clonex:function(deep,dataAndEvents,deepDataAndEvents){deep=(deep===true)?true:false;dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clonex(this,deep,dataAndEvents,deepDataAndEvents);});}});}(jQuery));;(function($){$.fn.fixedHeaderLite=function(conf){return this.each(function(){var $this=$(this),$t_fixed;var wtop=conf.top||0;function init(){$this.wrap('<div class="'+conf.wrap+'" />');$t_fixed=$this.clonex(false,true,false);var thead=$this.find("thead").first().clone(true);$t_fixed.append(thead);$t_fixed.addClass("tfixed").css("top",wtop).insertAfter($this);resizeFixed();}
function resizeFixed(){$t_fixed.find("th,td").each(function(index){var el=$this.find("th,td").eq(index);var iw=el.width();$(el).css({'width':iw,'min-width':iw});$(this).css({'width':iw,'min-width':iw});});}
function scrollFixed(){var offset=$(this).scrollTop()+wtop,toffset=$this.offset(),tableOffsetTop=toffset.top,tableOffsetLeft=toffset.left,tableOffsetBottom=tableOffsetTop+$this.height()-$this.find("thead").height(),tablePositionLeft=tableOffsetLeft-$(document).scrollLeft();$t_fixed.css("left",tablePositionLeft);if((offset<tableOffsetTop||offset>tableOffsetBottom)&&$t_fixed.is(":visible")){$this.find('thead').replaceWith($t_fixed.find('thead').first().clone(true));$t_fixed.hide();}else if(offset>=tableOffsetTop&&offset<=tableOffsetBottom&&$t_fixed.is(":hidden")){$t_fixed.find('thead').replaceWith($this.find('thead').first().clone(true));$t_fixed.show();}}
$(window).resize(resizeFixed);$(window).scroll(scrollFixed);init();});};})(jQuery);